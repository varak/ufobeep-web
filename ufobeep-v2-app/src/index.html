<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ufobeep.com http://ufobeep.com:8000 ws://ufobeep.com:8000 https://ssl.gstatic.com https://unpkg.com 'unsafe-eval'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://unpkg.com; font-src 'self' https://fonts.gstatic.com; script-src 'self' https://unpkg.com 'unsafe-eval'; img-src 'self' data: https://*.tile.openstreetmap.org https://*.openstreetmap.org; connect-src 'self' http://ufobeep.com:8000 ws://ufobeep.com:8000;">
    <title>UFOBeep</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="app.css?v=2.01">
</head>
<body>
    <div id="app">
        <!-- Loading Screen -->
        <div id="loadingScreen" class="screen active">
            <div class="loading-content">
                <div class="ufo-logo">🛸</div>
                <h1>UFOBeep</h1>
                <div class="loading-spinner"></div>
                <p>Initializing real-time UFO network...</p>
                <div class="version-indicator">v2.01</div>
            </div>
        </div>

        <!-- Screen Position Indicator -->
        <div id="screenIndicator" class="screen-indicator hidden">
            <div class="indicator-dot active" data-screen="camera"></div>
            <div class="indicator-dot" data-screen="map"></div>
            <div class="indicator-dot" data-screen="alerts"></div>
        </div>

        <!-- Main Navigation -->
        <nav id="bottomNav" class="bottom-nav hidden">
            <button class="nav-btn active" data-screen="camera">📷</button>
            <button class="nav-btn" data-screen="map">🗺️</button>
            <button class="nav-btn" data-screen="alerts">🚨</button>
            <button class="nav-btn" data-screen="radar">📡</button>
            <button class="nav-btn" data-screen="profile">👤</button>
        </nav>

        <!-- Camera/Report Screen -->
        <div id="cameraScreen" class="screen">
            <div class="screen-header">
                <h2>📷 Report Sighting</h2>
                <div class="header-controls">
                    <div class="connection-status" id="connectionStatus">●</div>
                </div>
            </div>
            
            <div class="camera-container">
                <div id="cameraPreview" class="camera-preview">
                    <div class="camera-placeholder">
                        <div class="camera-icon">📷</div>
                        <p>Tap to capture UFO sighting</p>
                    </div>
                </div>
                
                <!-- AR Compass Overlay -->
                <div class="ar-overlay">
                    <div class="compass" id="compass">
                        <div class="compass-needle" id="compassNeedle"></div>
                        <div class="compass-bearing" id="compassBearing">0°</div>
                    </div>
                    <div class="crosshair">+</div>
                </div>
            </div>

            <div class="capture-controls">
                <button id="captureBtn" class="capture-btn">📸 CAPTURE</button>
                <div class="location-info">
                    <div id="locationInfo">📍 Getting location...</div>
                    <div id="bearingInfo">🧭 Calibrating compass...</div>
                </div>
            </div>
        </div>

        <!-- Live Map Screen -->
        <div id="mapScreen" class="screen">
            <div class="screen-header">
                <h2>🗺️ Live Sightings</h2>
                <div class="map-stats">
                    <span id="mapSightingCount">12</span> sightings
                </div>
            </div>
            <div id="liveMap" class="live-map"></div>
        </div>

        <!-- Alerts Screen -->
        <div id="alertsScreen" class="screen">
            <div class="screen-header">
                <h2>🚨 Proximity Alerts</h2>
                <div class="alert-settings">
                    <label>Range: <span id="rangeValue">50</span>km</label>
                    <input type="range" id="alertRange" min="10" max="200" value="50">
                </div>
            </div>
            
            <div class="alert-feed" id="alertFeed">
                <div class="no-alerts">
                    <div class="alert-icon">👽</div>
                    <p>No recent alerts</p>
                    <small>You'll be notified of sightings within <span id="alertRangeText">50</span>km</small>
                </div>
            </div>
        </div>

        <!-- Radar Screen -->
        <div id="radarScreen" class="screen">
            <div class="screen-header">
                <h2>📡 UFO Radar</h2>
                <div class="radar-controls">
                    <button id="radarScanBtn" class="radar-scan-btn">SCAN</button>
                </div>
            </div>
            
            <div class="radar-container">
                <div class="radar-display" id="radarDisplay">
                    <div class="radar-center"></div>
                    <div class="radar-sweep" id="radarSweep"></div>
                    <div class="radar-grid">
                        <div class="radar-circle"></div>
                        <div class="radar-circle"></div>
                        <div class="radar-circle"></div>
                        <div class="radar-line radar-line-h"></div>
                        <div class="radar-line radar-line-v"></div>
                    </div>
                    <div class="radar-blips" id="radarBlips"></div>
                </div>
                
                <div class="radar-legend">
                    <div class="legend-item">
                        <div class="legend-dot recent"></div>
                        <span>Recent (24h)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot verified"></div>
                        <span>Verified</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot nearby"></div>
                        <span>Nearby</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Profile Screen -->
        <div id="profileScreen" class="screen">
            <div class="screen-header">
                <h2>👤 Profile</h2>
            </div>
            
            <div class="profile-content">
                <div class="profile-avatar">
                    <div class="avatar-icon">👽</div>
                </div>
                
                <div class="profile-stats">
                    <div class="stat-card">
                        <div class="stat-number" id="userSightings">0</div>
                        <div class="stat-label">Sightings</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="userVerifications">0</div>
                        <div class="stat-label">Verified</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="userRank">#0</div>
                        <div class="stat-label">Rank</div>
                    </div>
                </div>

                <div class="profile-settings">
                    <div class="setting-item">
                        <label>Country Flag</label>
                        <select id="countryFlag">
                            <option value="🇺🇸">🇺🇸 United States</option>
                            <option value="🇨🇦">🇨🇦 Canada</option>
                            <option value="🇲🇽">🇲🇽 Mexico</option>
                            <option value="🇧🇷">🇧🇷 Brazil</option>
                            <option value="🇯🇵">🇯🇵 Japan</option>
                            <option value="🇩🇪">🇩🇪 Germany</option>
                            <option value="🇬🇧">🇬🇧 United Kingdom</option>
                            <option value="🇦🇺">🇦🇺 Australia</option>
                            <option value="🌍">🌍 Other</option>
                        </select>
                    </div>
                    
                    <div class="setting-item">
                        <label>Notifications</label>
                        <input type="checkbox" id="enableNotifications" checked>
                    </div>
                    
                    <div class="setting-item">
                        <label>Sound Alerts</label>
                        <input type="checkbox" id="enableSounds" checked>
                    </div>
                    
                    <div class="setting-item">
                        <label>Auto-Upload Photos</label>
                        <input type="checkbox" id="autoUpload" checked>
                    </div>
                </div>

                <div class="profile-actions">
                    <button class="profile-btn" id="profileSettingsBtn">⚙️ Settings</button>
                    <button class="profile-btn" id="profileReadmeBtn">📖 Documentation</button>
                </div>

                <div class="app-info">
                    <p><strong>UFOBeep v2.01</strong></p>
                    <p>Build: 2025.08.04</p>
                    <p>API: https://ufobeep.com</p>
                </div>
                
                <div class="profile-spacer"></div>
            </div>
        </div>
    </div>

    <!-- Outdoor Compass Overlay -->
    <div id="outdoorCompass" class="outdoor-compass">
        <div class="compass-markings" id="compassMarkings"></div>
        <div class="bearing-display">
            <div class="bearing-value" id="outdoorBearingValue">000°</div>
            <div class="bearing-direction" id="outdoorBearingDirection">N</div>
        </div>
        <div class="sighting-arrow" id="sightingArrow"></div>
        <div class="sighting-info" id="sightingInfo">
            <div class="sighting-distance" id="sightingDistance">UFO 25 km away</div>
            <div class="sighting-direction-text" id="sightingDirectionText">Look North Northeast (067°)</div>
            <div class="sighting-action">Go Outside and Look Up!</div>
        </div>
        <button class="close-btn" id="closeCompassBtn" style="position: absolute; top: 10px; right: 10px;">✕</button>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>⚙️ Settings</h3>
                <button class="close-btn" id="closeSettingsBtn">✕</button>
            </div>
            <div class="modal-body">
                <div class="setting-item">
                    <label>Country Flag</label>
                    <select id="modalCountryFlag">
                        <option value="🇺🇸">🇺🇸 United States</option>
                        <option value="🇨🇦">🇨🇦 Canada</option>
                        <option value="🇲🇽">🇲🇽 Mexico</option>
                        <option value="🇧🇷">🇧🇷 Brazil</option>
                        <option value="🇯🇵">🇯🇵 Japan</option>
                        <option value="🇩🇪">🇩🇪 Germany</option>
                        <option value="🇬🇧">🇬🇧 United Kingdom</option>
                        <option value="🇦🇺">🇦🇺 Australia</option>
                        <option value="🌍">🌍 Other</option>
                    </select>
                </div>
                
                <div class="setting-item">
                    <label>Alert Range</label>
                    <div class="range-container">
                        <input type="range" id="modalAlertRange" min="10" max="200" value="50">
                        <span id="modalRangeValue">50</span>km
                    </div>
                </div>
                
                <div class="setting-item">
                    <label>Notifications</label>
                    <input type="checkbox" id="modalEnableNotifications" checked>
                </div>
                
                <div class="setting-item">
                    <label>Sound Alerts</label>
                    <input type="checkbox" id="modalEnableSounds" checked>
                </div>
                
                <div class="setting-item">
                    <label>Auto-Upload Photos</label>
                    <input type="checkbox" id="modalAutoUpload" checked>
                </div>
                
                <div class="setting-item">
                    <label>Language</label>
                    <select id="modalLanguage">
                        <option value="auto">Auto-detect</option>
                        <option value="en">English</option>
                        <option value="es">Español</option>
                    </select>
                </div>
                
                <div class="setting-section">
                    <h4>About</h4>
                    <div class="about-info">
                        <p><strong>UFOBeep</strong></p>
                        <p id="versionInfo">Version 2.01</p>
                        <p>Real-time UFO sighting alerts</p>
                        <p><small>API: https://ufobeep.com</small></p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn" id="saveSettingsBtn">Save Settings</button>
            </div>
        </div>
    </div>

    <!-- README Documentation Modal -->
    <div id="readmeModal" class="modal">
        <div class="modal-content readme-modal">
            <div class="modal-header">
                <h3>📖 UFOBeep Documentation</h3>
                <button class="close-btn" id="closeReadmeBtn">✕</button>
            </div>
            <div class="modal-body readme-content">
                <h2>🚀 Key Features</h2>
                
                <h3>Navigation & Interface</h3>
                <ul>
                    <li><strong>Swipe Navigation</strong>: Touch gesture navigation between screens</li>
                    <li><strong>Screen Position Indicators</strong>: Visual dots showing current screen</li>
                    <li><strong>Settings Modal</strong>: Gear icon access to preferences</li>
                    <li><strong>Responsive Design</strong>: Optimized for all devices</li>
                </ul>
                
                <h3>Location & Mapping</h3>
                <ul>
                    <li><strong>Interactive Map</strong>: Live sightings with clickable UFO markers</li>
                    <li><strong>Auto-Centering</strong>: Map centers on your GPS location</li>
                    <li><strong>Demo Sightings</strong>: Sample data when API unavailable</li>
                    <li><strong>Location Tracking</strong>: Real-time GPS positioning</li>
                </ul>
                
                <h3>Outdoor Compass System</h3>
                <ul>
                    <li><strong>Precision Compass</strong>: 360-degree bearing display</li>
                    <li><strong>Sighting Direction</strong>: Orange arrow pointing toward UFOs</li>
                    <li><strong>Live Updates</strong>: Real-time compass rotation</li>
                    <li><strong>Go Outside Mode</strong>: Full-screen compass for outdoor tracking</li>
                </ul>
                
                <h3>Multilingual Support</h3>
                <ul>
                    <li><strong>Auto-Detection</strong>: Detects browser language preference</li>
                    <li><strong>English/Spanish</strong>: Complete UI translation</li>
                    <li><strong>Voice Alerts</strong>: Text-to-speech in multiple languages</li>
                    <li><strong>Sound Packs</strong>: Professional voice generation system</li>
                </ul>
                
                <h3>Audio & Voice System</h3>
                <ul>
                    <li><strong>Dynamic Alerts</strong>: "UFO spotted X km [direction] - go outside!"</li>
                    <li><strong>TTS Fallback</strong>: Browser text-to-speech when needed</li>
                    <li><strong>Tone Beeps</strong>: Audio beep fallback for silent mode</li>
                    <li><strong>ElevenLabs Ready</strong>: Professional voice generation</li>
                </ul>
                
                <div class="readme-quote">
                    <em>"The truth is out there, and it's version controlled! 🛸👽"</em><br>
                    — Claude Code AI
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="app.js?v=2.01"></script>
</body>
</html>
